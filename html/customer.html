
<?php include('customerTrans.php'); ?>

<div ng-app="mainApp">
	<div class="addCustomer" id="addCustomerSect">
		<div class="center-container" style="height: inherit;">
			<div class="main">
				<h1 class="w3layouts_head">Customer Registration Form</h1>
					<div class="w3layouts_main_grid" ng-controller="customerController">
						<form action="customerTrans.php" method="post" class="w3_form_post" name="customerForm" novalidate>
							<div class="w3_agileits_main_grid w3l_main_grid">
								<span class="agileits_grid">
									<label>Username </label>
									<input type="text" name="user" ng-model="user" placeholder="Pick a username" minlength="8" maxlength="12" required>
								</span>

								<span ng-show="customerForm.user.$dirty && customerForm.user.$invalid">
									<span class="lead text-danger" ng-show="customerForm.user.$error.required">Username is required</span>
									<span class="lead text-danger" ng-show="customerForm.user.$error.minlength">Username should be more than 8 characters</span>
								</span>
							</div>
							<div class="w3_agileits_main_grid w3l_main_grid">
								<span class="agileits_grid">
									<label>Email </label>
									<input type="email" name="email" ng-model="email" placeholder="What's your email" maxlength="100" required>
								</span>
								
								<span ng-show="customerForm.email.$dirty && customerForm.email.$invalid ">
									<span class="lead text-danger" ng-show="customerForm.email.$error.required">Email is required</span>
									<span class="lead text-danger" ng-show="customerForm.email.$error.email">Email is invalid</span>
								</span>
							</div>
							<div class="w3_agileits_main_grid w3l_main_grid">
								<span class="agileits_grid">
									<label>Password </label>
									<input type="password" name="password" ng-model="password" placeholder="Create a Password" minlength="8" maxlength="12" class="form-control" style="width: 330px;height: 40px;background-color: inherit;color: white;" required>
								</span>

								<span ng-show="customerForm.password.$dirty && customerForm.password.$invalid">
									<span class="lead text-danger" ng-show="customerForm.password.$error.required">Password is required</span>
									<span class="lead text-danger" ng-show="customerForm.password.$error.minlength">Password should be more than 8 characters</span>
								</span>
							</div>
							
							<div class="divider" style="height: 10px"></div>

							<div class="w3_agileits_main_grid w3l_main_grid">
								<span class="agileits_grid">
									<label>Lastname </label>
									<input type="text" name="lastname" ng-model="lastname" placeholder="What's your Lastname" maxlength="50" required>
								</span>

								<span ng-show="customerForm.lastname.$dirty && customerForm.lastname.$invalid">
									<span class="lead text-danger" ng-show="customerForm.lastname.$error.required">Lastname is required</span>
								</span>
							</div>
							<div class="w3_agileits_main_grid w3l_main_grid">
								<span class="agileits_grid">
									<label>Initials </label>
									<input type="text" name="initials" ng-model="initials" placeholder="Provide your initials (e.g j.r)" maxlength="3" required="">
								</span>

								<span ng-show="customerForm.initials.$dirty && customerForm.initials.$invalid">
									<span class="lead text-danger" ng-show="customerForm.initials.$error.required">Initials is required</span>
								</span>
							</div>
							<div class="w3_agileits_main_grid w3l_main_grid">
								<span class="agileits_grid">
									<label>Address </label>
									<input type="text" name="address" ng-model="address" placeholder="What's your address" maxlength="256" required="">
								</span>

								<span ng-show="customerForm.address.$dirty && customerForm.address.$invalid">
									<span class="lead text-danger" ng-show="customerForm.address.$error.required">Address is required</span>
								</span>
							</div>
							<div class="w3_agileits_main_grid w3l_main_grid">
								<span class="agileits_grid">
									<label>Phone number </label>
									<input type="tel" class="form-control" name="phoneNo" ng-model="phoneNo" placeholder="Include a phone number" minlength="12" maxlength="12" style="width: 330px;height: 40px;background-color: inherit;color: white;"  required>
								</span>

								<span ng-show="customerForm.phoneNo.$dirty && customerForm.phoneNo.$invalid">
									<span class="lead text-danger" ng-show="customerForm.phoneNo.$error.required">Phone number is required</span>
									<span class="lead text-danger" ng-show="customerForm.phoneNo.$error.minlength">Phone number should be equal to 12 characters</span>
									<span class="lead text-danger" ng-show="customerForm.phoneNo.$error.tel">Phone number is invalid</span>
								</span>
							</div>

							<div class="w3_main_grid">
								<div class="w3_main_grid_right">
									<input type="submit" name="register" value="Register" ng-disabled="customerForm.user.$dirty && customerForm.user.$invalid || customerForm.email.$dirty && customerForm.email.$invalid || customerForm.password.$dirty && customerForm.password.$invalid || customerForm.lastname.$dirty && customerForm.lastname.$invalid || customerForm.initials.$dirty && customerForm.initials.$invalid || customerForm.address.$dirty && customerForm.address.$invalid|| customerForm.phoneNo.$dirty && customerForm.phoneNo.$invalid" />
									<span class="text-danger lead">
										<?php if(isset($errors['registerError'])) $errors['registerError']; ?>
									</span>
								</div>
							</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<div class="viewCustomers" style="height:inherit;">
		<div style="height: 30px;"></div>

		<h1 class="text-center text-uppercase" style="font-weight: bolder;font-size: 50px;color: white">List of customers</h1>
		<div class="container">
			
			<div style="height: 30px"></div>

			<div>
				<table class="table table-striped table-bordered table-responsive table-hover" style="color: black;font-size: 15px;background-color: inherit;">
					<thead class="thead-dark">
						<tr>
							<th>User name</th>
							<th>Email</th>
							<th>Password</th>
							<th>Name</th>
							<th>Phone number</th>
							<th>Address</th>
							<th>Date created</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<?php loadCustomers();  ?>
					</tbody>
				</table>
			</div>
		</div>

		<div style="height: 30px;"></div>

	</div>
	<!-- end of second part -->

<!-- 
	<div class="viewCustomer" style="height:300px">
		<table class="table table-striped">
			<thead></thead>
		</table>
	</div>
 -->
		<!-- footer -->

		